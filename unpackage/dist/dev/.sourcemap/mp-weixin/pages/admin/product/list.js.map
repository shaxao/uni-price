{"version":3,"file":"list.js","sources":["pages/admin/product/list.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRtaW4vcHJvZHVjdC9saXN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"admin-product-list-container\">\n    <view class=\"header-bar\">\n      <input class=\"search-input\" v-model=\"search\" placeholder=\"搜索产品名称/编号\" @input=\"handleSearch\" />\n      <button class=\"add-btn\" @click=\"handleAdd\">+ 新增产品</button>\n    </view>\n    <view class=\"filter-bar\">\n      <picker :range=\"priceOptions\" :value=\"priceIndex\" @change=\"onPriceChange\">\n        <view class=\"filter-item\">{{ priceOptions[priceIndex] }}</view>\n      </picker>\n      <picker :range=\"statusOptions\" :value=\"statusIndex\" @change=\"onStatusChange\">\n        <view class=\"filter-item\">{{ statusOptions[statusIndex] }}</view>\n      </picker>\n      <picker :range=\"warehouseOptions\" :value=\"warehouseIndex\" @change=\"onWarehouseChange\">\n        <view class=\"filter-item\">{{ warehouseOptions[warehouseIndex] }}</view>\n      </picker>\n    </view>\n    <view class=\"product-list\">\n      <view v-for=\"item in products\" :key=\"item.product_id\" class=\"product-card\">\n        <view class=\"card-left\">\n          <image\n            :src=\"defaultImg || item.product_image\"\n            class=\"product-img\"\n            mode=\"aspectFill\"\n          />\n        </view>\n        <view class=\"card-right\">\n          <view class=\"card-header\">\n            <text class=\"product-title\">{{ item.product_name }}</text>\n            <text\n              class=\"status-tag\"\n              :class=\"item.status === 'on' ? 'on' : 'off'\"\n            >{{ item.status === 'on' ? '上架' : '下架' }}</text>\n          </view>\n          <view class=\"product-info\">\n            <text class=\"product-id\">编号：{{ item.product_id }}</text>\n            <text class=\"product-desc\">{{ item.description }}</text>\n            <text class=\"product-stock\">库存：{{ item.quantity }}</text>\n            <text class=\"product-warehouse\">仓库：{{ item.warehouse }}</text>\n            </view>\n          <view class=\"card-actions\">\n            <button class=\"mini-btn\" @click=\"onView(item)\">查看</button>\n            <button class=\"mini-btn\" @click=\"onEdit(item)\">编辑</button>\n            <button class=\"mini-btn danger\" @click=\"onDelete(item)\">删除</button>\n            <button\n              class=\"mini-btn\"\n              v-if=\"item.status === 'on'\"\n              @click=\"onChangeStatus(item, 'off')\"\n            >下架</button>\n            <button\n              class=\"mini-btn\"\n              v-else\n              @click=\"onChangeStatus(item, 'on')\"\n            >上架</button>\n            <!-- 显示报价数量 -->\n            <view class=\"quote-badge\" v-if=\"item.pendingQuotes > 0\" @click=\"onViewQuotes(item)\">\n              {{ item.pendingQuotes }}\n            </view>\n          </view>\n        </view>\n        </view>\n    </view>\n    <!-- 分页组件占位 -->\n    <view class=\"pagination-bar\">\n      <button class=\"page-btn\" :disabled=\"page === 1\" @click=\"page--\">上一页</button>\n      <text class=\"page-info\">第{{ page }}页</text>\n      <button class=\"page-btn\" :disabled=\"!hasNextPage\" @click=\"page++\">下一页</button>\n    </view>\n  </view>\n</template>\n\n<script>\nimport BaseCard from '../../../components/BaseCard.vue'\n\nexport default {\n  name: 'AdminProductList',\n  components: { BaseCard },\n  data() {\n    return {\n      search: '',\n      page: 1,\n      pageSize: 10,\n      priceOptions: ['默认排序', '价格从高到低', '价格从低到高'],\n      priceIndex: 0,\n      statusOptions: ['全部状态', '上架', '下架'],\n      statusIndex: 0,\n      warehouseOptions: ['全部仓库', '上海仓', '深圳仓'],\n      warehouseIndex: 0,\n      products: [],\n      defaultImg: '/static/images/default-product.png',\n    }\n  },\n  computed: {\n    filteredProducts() {\n      let list = this.products\n      // 搜索\n      if (this.search) {\n        const s = this.search.trim().toLowerCase()\n        list = list.filter(item =>\n          item.product_name.toLowerCase().includes(s) ||\n          item.product_id.toLowerCase().includes(s)\n        )\n      }\n      // 状态筛选\n      if (this.statusIndex === 1) list = list.filter(i => i.status === 'on')\n      if (this.statusIndex === 2) list = list.filter(i => i.status === 'off')\n      // 仓库筛选\n      if (this.warehouseIndex > 0) list = list.filter(i => i.warehouse === this.warehouseOptions[this.warehouseIndex])\n      // 价格排序\n      if (this.priceIndex === 1) list = list.slice().sort((a, b) => (b.price || 0) - (a.price || 0))\n      if (this.priceIndex === 2) list = list.slice().sort((a, b) => (a.price || 0) - (b.price || 0))\n      // 分页\n      const start = (this.page - 1) * this.pageSize\n      return list.slice(start, start + this.pageSize)\n    },\n    hasNextPage() {\n      let list = this.products\n      if (this.search) {\n        const s = this.search.trim().toLowerCase()\n        list = list.filter(item =>\n          item.product_name.toLowerCase().includes(s) ||\n          item.product_id.toLowerCase().includes(s)\n        )\n      }\n      if (this.statusIndex === 1) list = list.filter(i => i.status === 'on')\n      if (this.statusIndex === 2) list = list.filter(i => i.status === 'off')\n      if (this.warehouseIndex > 0) list = list.filter(i => i.warehouse === this.warehouseOptions[this.warehouseIndex])\n      return list.length > this.page * this.pageSize\n    }\n  },\n  created() {\n    this.loadProducts()\n  },\n  methods: {\n    loadProducts() {\n      // 生成模拟产品数据\n      const mockProducts = [\n        {\n          product_id: 'P1001',\n          product_name: '智能手表',\n          description: '多功能健康监测智能手表',\n          product_image: 'https://cdn.example.com/img/watch.jpg',\n          quantity: 120,\n          warehouse: '上海仓',\n          status: 'on',\n          pendingQuotes: 3, // 待审核报价数量\n          totalQuotes: 5,   // 总报价数量\n          hasNewQuotes: true // 是否有新报价\n        },\n        {\n          product_id: 'P1002',\n          product_name: '蓝牙耳机',\n          description: '降噪无线蓝牙耳机',\n          product_image: 'https://cdn.example.com/img/earphone.jpg',\n          quantity: 80,\n          warehouse: '深圳仓',\n          status: 'off',\n          pendingQuotes: 0,\n          totalQuotes: 2,\n          hasNewQuotes: false\n        },\n        {\n          product_id: 'P1003',\n          product_name: '智能音箱',\n          description: '高音质智能语音音箱',\n          product_image: 'https://cdn.example.com/img/speaker.jpg',\n          quantity: 50,\n          warehouse: '上海仓',\n          status: 'on',\n          pendingQuotes: 2,\n          totalQuotes: 3,\n          hasNewQuotes: true\n        },\n        {\n          product_id: 'P1004',\n          product_name: '无线充电器',\n          description: '快充无线充电板',\n          product_image: 'https://cdn.example.com/img/charger.jpg',\n          quantity: 200,\n          warehouse: '深圳仓',\n          status: 'on',\n          pendingQuotes: 1,\n          totalQuotes: 1,\n          hasNewQuotes: true\n        },\n        {\n          product_id: 'P1005',\n          product_name: '智能手环',\n          description: '运动监测智能手环',\n          product_image: 'https://cdn.example.com/img/band.jpg',\n          quantity: 150,\n          warehouse: '上海仓',\n          status: 'on',\n          pendingQuotes: 0,\n          totalQuotes: 0,\n          hasNewQuotes: false\n        }\n      ];\n      \n      this.products = mockProducts;\n    },\n    handleSearch() {\n      this.page = 1\n    },\n    onPriceChange(e) {\n      this.priceIndex = e.detail.value\n      this.page = 1\n    },\n    onStatusChange(e) {\n      this.statusIndex = e.detail.value\n      this.page = 1\n    },\n    onWarehouseChange(e) {\n      this.warehouseIndex = e.detail.value\n      this.page = 1\n    },\n    handleAdd() {\n      uni.navigateTo({ url: '/pages/admin/product/edit' })\n    },\n    onView(item) {\n      uni.navigateTo({ url: `/pages/admin/product/detail?id=${item.product_id}` })\n    },\n    onEdit(item) {\n      uni.navigateTo({ url: `/pages/admin/product/edit?id=${item.product_id}` })\n    },\n    onDelete(item) {\n      uni.showModal({\n        title: '确认删除',\n        content: `确定要删除产品「${item.product_name}」吗？`,\n        success: (res) => {\n          if (res.confirm) {\n            this.products = this.products.filter(p => p.product_id !== item.product_id)\n            uni.showToast({ title: '已删除', icon: 'success' })\n          }\n        }\n      })\n    },\n    onChangeStatus(item, status) {\n      item.status = status\n      uni.showToast({ title: `已${status === 'on' ? '上架' : '下架'}`, icon: 'success' })\n    },\n    onViewQuotes(item) {\n      // 跳转到产品详情页，自动滚动到报价列表\n      uni.navigateTo({ \n        url: `/pages/admin/product/detail?id=${item.product_id}&scrollToQuotes=true`,\n        success: () => {\n          // 标记报价已查看\n          item.hasNewQuotes = false;\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../../styles/theme.scss';\n.admin-product-list-container {\n  min-height: 100vh;\n  background: $bg-secondary;\n  padding: 24rpx 0;\n}\n.header-bar {\n  display: flex;\n  gap: 12rpx;\n  margin-bottom: 20rpx;\n  align-items: center;\n  padding: 0 16rpx;\n  .search-input {\n    flex: 1;\n    height: 56rpx;\n    border: 1px solid #e0e0e0;\n    border-radius: 8rpx;\n    font-size: 26rpx;\n    padding: 0 16rpx;\n    background: #fff;\n  }\n  .add-btn {\n    height: 56rpx;\n    padding: 0 15rpx;\n    border-radius: 8rpx;\n    font-size: 26rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    line-height: normal;\n    background: #1976d2;\n    color: #fff;\n    border: none;\n  }\n}\n.product-list {\n  padding: 0 8rpx;\n}\n.product-card {\n  display: flex;\n  background: #fff;\n  border-radius: 14rpx;\n  box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.04);\n  margin-bottom: 18rpx;\n  padding: 16rpx 12rpx;\n  align-items: flex-start;\n  position: relative;\n}\n.card-left {\n  flex-shrink: 0;\n    display: flex;\n    align-items: center;\n  justify-content: center;\n}\n.product-img {\n  width: 80rpx;\n  height: 80rpx;\n  border-radius: 10rpx;\n  background: #f5f5f5;\n      object-fit: cover;\n    }\n.card-right {\n      flex: 1;\n  margin-left: 16rpx;\n      display: flex;\n      flex-direction: column;\n  justify-content: center;\n}\n.card-header {\n        display: flex;\n        align-items: center;\n  justify-content: space-between;\n  margin-bottom: 6rpx;\n}\n        .product-title {\n  font-size: 30rpx;\n          font-weight: bold;\n          color: #222;\n        }\n.status-tag {\n  font-size: 22rpx;\n  padding: 2rpx 12rpx;\n  border-radius: 12rpx;\n  margin-left: 8rpx;\n  &.on {\n          background: #e3f2fd;\n          color: #1976d2;\n  }\n          &.off {\n    background: #ffebee;\n            color: #f44336;\n          }\n        }\n.product-info {\n  font-size: 24rpx;\n        color: #666;\n  margin-bottom: 8rpx;\n  .product-id, .product-desc, .product-stock, .product-warehouse {\n    display: block;\n    margin-bottom: 2rpx;\n    }\n  }\n  .card-actions {\n    display: flex;\n  gap: 12rpx;\n  margin-top: 8rpx;\n  position: relative;\n  .mini-btn {\n    font-size: 22rpx;\n    min-width: 72rpx;\n    height: 44rpx;\n    line-height: 44rpx;\n    border-radius: 22rpx;\n      background: #f5f5f5;\n      color: #1976d2;\n      border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 18rpx;\n    box-sizing: border-box;\n      &.danger {\n        background: #fbe9e7;\n        color: #f44336;\n    }\n  }\n    \n  /* 报价数量角标 */\n  .quote-badge {\n    position: absolute;\n    right: 0;\n    top: -30rpx;\n    min-width: 40rpx;\n    height: 40rpx;\n    border-radius: 20rpx;\n    background-color: #f44336;\n    color: white;\n    font-size: 22rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 10rpx;\n    box-shadow: 0 2rpx 8rpx rgba(0,0,0,0.15);\n    animation: pulse 2s infinite;\n  }\n  \n  @keyframes pulse {\n    0% {\n      transform: scale(1);\n    }\n    50% {\n      transform: scale(1.1);\n    }\n    100% {\n      transform: scale(1);\n    }\n  }\n}\n.pagination-bar {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 16rpx;\n  margin: 24rpx 0 8rpx 0;\n  .page-btn {\n    font-size: 22rpx;\n    min-width: 80rpx;\n    height: 44rpx;\n    line-height: 44rpx;\n    border-radius: 22rpx;\n    background: #e3f2fd;\n    color: #1976d2;\n    border: none;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 0 18rpx;\n    box-sizing: border-box;\n    &:disabled {\n      background: #eee;\n      color: #aaa;\n    }\n  }\n  .page-info {\n    font-size: 22rpx;\n    color: #666;\n  }\n}\n.filter-bar {\n  display: flex;\n  gap: 18rpx;\n  margin-bottom: 18rpx;\n  padding: 0 16rpx;\n  .filter-item {\n    font-size: 24rpx;\n    color: #1976d2;\n    background: #f5f5f5;\n    border-radius: 8rpx;\n    padding: 10rpx 24rpx;\n    min-width: 120rpx;\n    text-align: center;\n  }\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/admin/product/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}