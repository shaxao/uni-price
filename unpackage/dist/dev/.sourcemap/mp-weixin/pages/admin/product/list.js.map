{"version":3,"file":"list.js","sources":["pages/admin/product/list.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWRtaW4vcHJvZHVjdC9saXN0LnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"admin-product-list-container\">\n    <TopBar title=\"产品管理\" :showBack=\"false\" :withBorder=\"true\" />\n    <AdminNavBar currentPath=\"/pages/admin/product/list\" />\n    \n    <view class=\"header-bar\">\n      <input class=\"search-input\" v-model=\"search\" placeholder=\"搜索产品名称/编号\" @input=\"handleSearch\" />\n      <button class=\"add-btn\" @click=\"handleAdd\">+ 新增产品</button>\n    </view>\n    <view class=\"filter-bar\">\n      <picker :range=\"priceOptions\" :value=\"priceIndex\" @change=\"onPriceChange\">\n        <view class=\"filter-item\">{{ priceOptions[priceIndex] }}</view>\n      </picker>\n      <picker :range=\"statusOptions\" :value=\"statusIndex\" @change=\"onStatusChange\">\n        <view class=\"filter-item\">{{ statusOptions[statusIndex] }}</view>\n      </picker>\n      <picker :range=\"warehouseOptions\" :value=\"warehouseIndex\" @change=\"onWarehouseChange\">\n        <view class=\"filter-item\">{{ warehouseOptions[warehouseIndex] }}</view>\n      </picker>\n    </view>\n    <view class=\"product-list\">\n      <view v-for=\"item in filteredProducts\" :key=\"item.product_id\" class=\"product-card\">\n        <view class=\"card-left\">\n          <image\n            :src=\"defaultImg || item.product_image\"\n            class=\"product-img\"\n            mode=\"aspectFill\"\n          />\n        </view>\n        <view class=\"card-right\">\n          <view class=\"card-header\">\n            <text class=\"product-title\">{{ item.product_name }}</text>\n            <text\n              class=\"status-tag\"\n              :class=\"item.status === 'on' ? 'on' : 'off'\"\n            >{{ item.status === 'on' ? '上架' : '下架' }}</text>\n          </view>\n          <view class=\"product-info\">\n            <text class=\"product-id\">编号：{{ item.product_id }}</text>\n            <text class=\"product-desc\">{{ item.description }}</text>\n            <text class=\"product-stock\">库存：{{ item.quantity }}</text>\n            <text class=\"product-warehouse\">仓库：{{ item.warehouse }}</text>\n            <text class=\"product-price\" v-if=\"item.price\">价格：¥{{ item.price.toFixed(2) }}</text>\n          </view>\n          <view class=\"card-actions\">\n            <button class=\"mini-btn\" @click=\"onView(item)\">查看</button>\n            <button class=\"mini-btn\" @click=\"onEdit(item)\">编辑</button>\n            <button class=\"mini-btn danger\" @click=\"onDelete(item)\">删除</button>\n            <button\n              class=\"mini-btn\"\n              v-if=\"item.status === 'on'\"\n              @click=\"onChangeStatus(item, 'off')\"\n            >下架</button>\n            <button\n              class=\"mini-btn\"\n              v-else\n              @click=\"onChangeStatus(item, 'on')\"\n            >上架</button>\n            <!-- 显示报价数量 -->\n            <view class=\"quote-badge\" v-if=\"item.pendingQuotes > 0\" @click=\"onViewQuotes(item)\">\n              {{ item.pendingQuotes }}\n            </view>\n          </view>\n        </view>\n        </view>\n    </view>\n    <!-- 分页组件占位 -->\n    <view class=\"pagination-bar\">\n      <button class=\"page-btn\" :disabled=\"page === 1\" @click=\"page--\">上一页</button>\n      <text class=\"page-info\">第{{ page }}页</text>\n      <button class=\"page-btn\" :disabled=\"!hasNextPage\" @click=\"page++\">下一页</button>\n    </view>\n    \n    <LoadingAnimation v-if=\"loading\" />\n    \n    <!-- 空状态 -->\n    <view class=\"empty-state\" v-if=\"filteredProducts.length === 0\">\n      <image src=\"/static/images/empty-product.png\" class=\"empty-image\" mode=\"aspectFit\" />\n      <text class=\"empty-text\">{{ search ? '未找到匹配的产品' : '暂无产品数据' }}</text>\n    </view>\n  </view>\n</template>\n\n<script>\nimport BaseCard from '../../../components/BaseCard.vue'\nimport TopBar from '../../../components/TopBar.vue'\nimport AdminNavBar from '../../../components/AdminNavBar.vue'\nimport LoadingAnimation from '../../../components/LoadingAnimation.vue'\n\nexport default {\n  name: 'AdminProductList',\n  components: { BaseCard, TopBar, AdminNavBar, LoadingAnimation },\n  data() {\n    return {\n      loading: false,\n      search: '',\n      page: 1,\n      pageSize: 10,\n      priceOptions: ['默认排序', '价格从高到低', '价格从低到高'],\n      priceIndex: 0,\n      statusOptions: ['全部状态', '上架', '下架'],\n      statusIndex: 0,\n      warehouseOptions: ['全部仓库', '上海仓', '深圳仓'],\n      warehouseIndex: 0,\n      products: [],\n      defaultImg: '/static/images/default-product.png',\n    }\n  },\n  computed: {\n    filteredProducts() {\n      let list = this.products\n      // 搜索\n      if (this.search) {\n        const s = this.search.trim().toLowerCase()\n        list = list.filter(item =>\n          item.product_name.toLowerCase().includes(s) ||\n          item.product_id.toLowerCase().includes(s)\n        )\n      }\n      // 状态筛选\n      if (this.statusIndex === 1) list = list.filter(i => i.status === 'on')\n      if (this.statusIndex === 2) list = list.filter(i => i.status === 'off')\n      // 仓库筛选\n      if (this.warehouseIndex > 0) list = list.filter(i => i.warehouse === this.warehouseOptions[this.warehouseIndex])\n      // 价格排序\n      if (this.priceIndex === 1) list = list.slice().sort((a, b) => (b.price || 0) - (a.price || 0))\n      if (this.priceIndex === 2) list = list.slice().sort((a, b) => (a.price || 0) - (b.price || 0))\n      // 分页\n      const start = (this.page - 1) * this.pageSize\n      return list.slice(start, start + this.pageSize)\n    },\n    hasNextPage() {\n      let list = this.products\n      if (this.search) {\n        const s = this.search.trim().toLowerCase()\n        list = list.filter(item =>\n          item.product_name.toLowerCase().includes(s) ||\n          item.product_id.toLowerCase().includes(s)\n        )\n      }\n      if (this.statusIndex === 1) list = list.filter(i => i.status === 'on')\n      if (this.statusIndex === 2) list = list.filter(i => i.status === 'off')\n      if (this.warehouseIndex > 0) list = list.filter(i => i.warehouse === this.warehouseOptions[this.warehouseIndex])\n      return list.length > this.page * this.pageSize\n    }\n  },\n  onLoad() {\n    this.loadProducts()\n  },\n  methods: {\n    loadProducts() {\n      this.loading = true\n      // 生成模拟产品数据\n      setTimeout(() => {\n        const mockProducts = [\n          {\n            product_id: 'P1001',\n            product_name: '智能手表',\n            description: '多功能健康监测智能手表',\n            product_image: 'https://cdn.example.com/img/watch.jpg',\n            quantity: 120,\n            warehouse: '上海仓',\n            status: 'on',\n            price: 1280.00,\n            pendingQuotes: 3, // 待审核报价数量\n            totalQuotes: 5,   // 总报价数量\n            hasNewQuotes: true // 是否有新报价\n          },\n          {\n            product_id: 'P1002',\n            product_name: '蓝牙耳机',\n            description: '降噪无线蓝牙耳机',\n            product_image: 'https://cdn.example.com/img/earphone.jpg',\n            quantity: 80,\n            warehouse: '深圳仓',\n            status: 'off',\n            price: 299.00,\n            pendingQuotes: 0,\n            totalQuotes: 2,\n            hasNewQuotes: false\n          },\n          {\n            product_id: 'P1003',\n            product_name: '智能音箱',\n            description: '高音质智能语音音箱',\n            product_image: 'https://cdn.example.com/img/speaker.jpg',\n            quantity: 50,\n            warehouse: '上海仓',\n            status: 'on',\n            price: 799.00,\n            pendingQuotes: 2,\n            totalQuotes: 3,\n            hasNewQuotes: true\n          },\n          {\n            product_id: 'P1004',\n            product_name: '无线充电器',\n            description: '快充无线充电板',\n            product_image: 'https://cdn.example.com/img/charger.jpg',\n            quantity: 200,\n            warehouse: '深圳仓',\n            status: 'on',\n            price: 159.00,\n            pendingQuotes: 1,\n            totalQuotes: 1,\n            hasNewQuotes: true\n          },\n          {\n            product_id: 'P1005',\n            product_name: '智能手环',\n            description: '运动监测智能手环',\n            product_image: 'https://cdn.example.com/img/band.jpg',\n            quantity: 150,\n            warehouse: '上海仓',\n            status: 'on',\n            price: 199.00,\n            pendingQuotes: 0,\n            totalQuotes: 0,\n            hasNewQuotes: false\n          }\n        ];\n        \n        this.products = mockProducts;\n        this.loading = false;\n      }, 800);\n    },\n    handleSearch() {\n      this.page = 1\n    },\n    onPriceChange(e) {\n      this.priceIndex = e.detail.value\n      this.page = 1\n    },\n    onStatusChange(e) {\n      this.statusIndex = e.detail.value\n      this.page = 1\n    },\n    onWarehouseChange(e) {\n      this.warehouseIndex = e.detail.value\n      this.page = 1\n    },\n    handleAdd() {\n      uni.navigateTo({ url: '/pages/admin/product/edit' })\n    },\n    onView(item) {\n      uni.navigateTo({ url: `/pages/admin/product/detail?id=${item.product_id}` })\n    },\n    onEdit(item) {\n      uni.navigateTo({ url: `/pages/admin/product/edit?id=${item.product_id}` })\n    },\n    onDelete(item) {\n      uni.showModal({\n        title: '确认删除',\n        content: `确定要删除产品「${item.product_name}」吗？`,\n        success: (res) => {\n          if (res.confirm) {\n            this.products = this.products.filter(p => p.product_id !== item.product_id)\n            uni.showToast({ title: '已删除', icon: 'success' })\n          }\n        }\n      })\n    },\n    onChangeStatus(item, status) {\n      item.status = status\n      uni.showToast({ title: `已${status === 'on' ? '上架' : '下架'}`, icon: 'success' })\n    },\n    onViewQuotes(item) {\n      // 跳转到产品详情页，自动滚动到报价列表\n      uni.navigateTo({ \n        url: `/pages/admin/product/detail?id=${item.product_id}&scrollToQuotes=true`,\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.admin-product-list-container {\n  padding-bottom: 30rpx;\n  \n  .header-bar {\n    padding: 20rpx;\n    display: flex;\n    align-items: center;\n    \n    .search-input {\n      flex: 1;\n      height: 72rpx;\n      background-color: #f5f7fa;\n      border-radius: 36rpx;\n      padding: 0 20rpx;\n      font-size: 28rpx;\n      border: 1rpx solid #eaeaea;\n    }\n    \n    .add-btn {\n      width: 200rpx;\n      height: 72rpx;\n      background-color: #1976d2;\n      color: #ffffff;\n      font-size: 28rpx;\n      border-radius: 36rpx;\n      margin-left: 20rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n  }\n  \n  .filter-bar {\n    padding: 0 20rpx 20rpx;\n    display: flex;\n    \n    .filter-item {\n      padding: 10rpx 24rpx;\n      background-color: #f5f7fa;\n      border-radius: 30rpx;\n      font-size: 26rpx;\n      color: #666;\n      margin-right: 20rpx;\n    }\n  }\n  \n  .product-list {\n    padding: 0 20rpx;\n    \n    .product-card {\n      background-color: #fff;\n      border-radius: 12rpx;\n      margin-bottom: 20rpx;\n      padding: 20rpx;\n      display: flex;\n      box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\n      \n      .card-left {\n        width: 160rpx;\n        height: 160rpx;\n        margin-right: 20rpx;\n        \n        .product-img {\n          width: 100%;\n          height: 100%;\n          border-radius: 8rpx;\n        }\n      }\n      \n      .card-right {\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        \n        .card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 16rpx;\n          \n          .product-title {\n            font-size: 32rpx;\n            color: #333;\n            font-weight: 500;\n          }\n          \n          .status-tag {\n            font-size: 24rpx;\n            padding: 4rpx 16rpx;\n            border-radius: 20rpx;\n            \n            &.on {\n              background-color: #e8f5e9;\n              color: #43a047;\n            }\n            \n            &.off {\n              background-color: #ffebee;\n              color: #e53935;\n            }\n          }\n        }\n        \n        .product-info {\n          flex: 1;\n          \n          text {\n            font-size: 26rpx;\n            color: #666;\n            display: block;\n            margin-bottom: 8rpx;\n          }\n          \n          .product-price {\n            color: #f44336;\n            font-weight: 500;\n          }\n        }\n        \n        .card-actions {\n          margin-top: 20rpx;\n          display: flex;\n          align-items: center;\n          position: relative;\n          \n          .mini-btn {\n            padding: 8rpx 20rpx;\n            font-size: 24rpx;\n            margin-right: 20rpx;\n            border-radius: 30rpx;\n            background-color: #f5f7fa;\n            color: #333;\n            \n            &.danger {\n              color: #f44336;\n            }\n          }\n          \n          .quote-badge {\n            position: absolute;\n            right: 0;\n            top: 0;\n            min-width: 40rpx;\n            height: 40rpx;\n            border-radius: 20rpx;\n            background-color: #f44336;\n            color: #fff;\n            font-size: 24rpx;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 0 10rpx;\n          }\n        }\n      }\n    }\n  }\n  \n  .pagination-bar {\n    padding: 20rpx;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    \n    .page-btn {\n      width: 150rpx;\n      height: 70rpx;\n      border-radius: 35rpx;\n      font-size: 28rpx;\n      background-color: #1976d2;\n      color: #fff;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      \n      &:disabled {\n        background-color: #ccc;\n      }\n    }\n    \n    .page-info {\n      margin: 0 30rpx;\n      font-size: 28rpx;\n      color: #333;\n    }\n  }\n  \n  .empty-state {\n    padding: 100rpx 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    \n    .empty-image {\n      width: 200rpx;\n      height: 200rpx;\n      margin-bottom: 30rpx;\n    }\n    \n    .empty-text {\n      font-size: 28rpx;\n      color: #999;\n    }\n  }\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/admin/product/list.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}