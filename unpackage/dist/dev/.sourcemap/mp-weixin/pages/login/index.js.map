{"version":3,"file":"index.js","sources":["pages/login/index.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"login-container\">\n    <view class=\"logo-section\">\n      <image class=\"logo\" src=\"/static/images/logo.png\" mode=\"aspectFit\" />\n      <text class=\"title\">纵远报价管理系统</text>\n      <text class=\"subtitle\">专业供应链报价管理平台</text>\n    </view>\n    \n    <!-- 登录类型选择 -->\n    <view class=\"login-type-section\">\n      <view \n        class=\"login-type-item\" \n        :class=\"{ active: loginType === 'admin' }\" \n        @click=\"setLoginType('admin')\"\n      >\n        <view class=\"type-icon admin-icon\">\n          <image src=\"/static/images/admin-icon.png\" mode=\"aspectFit\" />\n        </view>\n        <text class=\"type-text\">管理员入口</text>\n      </view>\n      \n      <view \n        class=\"login-type-item\" \n        :class=\"{ active: loginType === 'supplier' }\" \n        @click=\"setLoginType('supplier')\"\n      >\n        <view class=\"type-icon supplier-icon\">\n          <image src=\"/static/images/supplier-icon.png\" mode=\"aspectFit\" />\n        </view>\n        <text class=\"type-text\">供应商入口</text>\n      </view>\n    </view>\n    \n    <!-- 管理员登录表单 -->\n    <view class=\"login-form\" v-if=\"loginType === 'admin'\">\n      <view class=\"form-item username\">\n        <text class=\"form-icon\">👤</text>\n        <input \n          class=\"form-input\" \n          type=\"text\" \n          v-model=\"admin.username\" \n          placeholder=\"请输入账号\" \n        />\n      </view>\n      \n      <view class=\"form-item password\">\n        <text class=\"form-icon\">🔒</text>\n        <input \n          class=\"form-input\" \n          :type=\"showPassword ? 'text' : 'password'\" \n          v-model=\"admin.password\" \n          placeholder=\"请输入密码\" \n        />\n        <text class=\"toggle-password\" @click=\"togglePassword\">\n          {{ showPassword ? '👁️' : '👁️‍🗨️' }}\n        </text>\n      </view>\n      \n      <button class=\"login-btn admin-login-btn\" @click=\"handleAdminLogin\">\n        登 录\n      </button>\n    </view>\n    \n    <!-- 供应商登录 -->\n    <view class=\"login-form\" v-if=\"loginType === 'supplier'\">\n      <button class=\"login-btn supplier-login-btn\" @click=\"handleSupplierLogin\">\n        微信一键登录\n      </button>\n    </view>\n    \n    <!-- 底部链接 -->\n    <view class=\"bottom-links\">\n      <text class=\"link\" @click=\"handleForgotPassword\">忘记密码</text>\n      <text class=\"separator\">•</text>\n      <text class=\"link\" @click=\"handleRegister\">注册账号</text>\n    </view>\n  </view>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\n\nexport default {\n  name: 'Login',\n  data() {\n    return {\n      loginType: 'admin', // 默认管理员登录\n      showPassword: false,\n      loading: false,\n      admin: {\n        username: '',\n        password: ''\n      }\n    }\n  },\n  onLoad() {\n    // 检查是否已登录\n    this.checkLoginStatus()\n  },\n  methods: {\n    ...mapActions('user', ['login']),\n    \n    async checkLoginStatus() {\n      const token = uni.getStorageSync('token')\n      if (token) {\n        // 已登录，跳转到首页\n        uni.reLaunch({\n          url: '/pages/index/index'\n        })\n      }\n    },\n    \n    setLoginType(type) {\n      this.loginType = type\n    },\n    \n    togglePassword() {\n      this.showPassword = !this.showPassword\n    },\n    \n    async handleAdminLogin() {\n      if (this.loading) return\n      \n      // 验证输入\n      if (!this.admin.username || !this.admin.username.trim()) {\n        return uni.showToast({\n          title: '请输入账号',\n          icon: 'none'\n        })\n      }\n      \n      if (!this.admin.password) {\n        return uni.showToast({\n          title: '请输入密码',\n          icon: 'none'\n        })\n      }\n      \n      this.loading = true\n      try {\n        // 调用管理员登录接口\n        await this.login({\n          type: 'admin',\n          username: this.admin.username,\n          password: this.admin.password\n        })\n        \n        // 登录成功，跳转到首页\n        uni.reLaunch({\n          url: '/pages/admin/product/list'\n        })\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '登录失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async handleSupplierLogin() {\n      if (this.loading) return\n      \n      this.loading = true\n      try {\n        // 获取微信登录凭证\n        const { code } = await uni.login()\n        \n        // 调用供应商登录接口\n        await this.login({ \n          type: 'supplier',\n          code \n        })\n        \n        // 登录成功，跳转到首页\n        uni.reLaunch({\n          url: '/pages/index/index'\n        })\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '登录失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    handleForgotPassword() {\n      // 跳转到忘记密码页面\n      uni.navigateTo({\n        url: '/pages/forgot-password/index'\n      })\n    },\n    \n    handleRegister() {\n      // 跳转到注册账号页面\n      uni.navigateTo({\n        url: '/pages/register/index'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/theme.scss';\n\n.login-container {\n  min-height: 100vh;\n  background-color: $bg-primary;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 40rpx;\n}\n\n.logo-section {\n  margin-top: 100rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  \n  .logo {\n    width: 180rpx;\n    height: 180rpx;\n    margin-bottom: 30rpx;\n    border-radius: 30rpx;\n  }\n  \n  .title {\n    font-size: 44rpx;\n    font-weight: bold;\n    color: $text-primary;\n    margin-bottom: 16rpx;\n  }\n  \n  .subtitle {\n    font-size: 28rpx;\n    color: $text-secondary;\n  }\n}\n\n.login-type-section {\n  display: flex;\n  width: 100%;\n  margin-top: 80rpx;\n  margin-bottom: 60rpx;\n  justify-content: space-between;\n  \n  .login-type-item {\n    width: 48%;\n    height: 200rpx;\n    background-color: #fff;\n    border-radius: 20rpx;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 4rpx 16rpx rgba(0, 0, 0, 0.08);\n    transition: all 0.3s;\n    \n    &.active {\n      box-shadow: 0 4rpx 24rpx rgba(25, 118, 210, 0.15);\n      border: 2rpx solid $primary-color;\n    }\n    \n    .type-icon {\n      width: 100rpx;\n      height: 100rpx;\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      margin-bottom: 16rpx;\n      \n      image {\n        width: 60rpx;\n        height: 60rpx;\n      }\n    }\n    \n    .admin-icon {\n      background-color: rgba(25, 118, 210, 0.1);\n    }\n    \n    .supplier-icon {\n      background-color: rgba(245, 124, 0, 0.1);\n    }\n    \n    .type-text {\n      font-size: 28rpx;\n      color: $text-primary;\n      font-weight: 500;\n    }\n  }\n}\n\n.login-form {\n  width: 100%;\n  \n  .form-item {\n    height: 100rpx;\n    background-color: #f5f5f5;\n    border-radius: 100rpx;\n    display: flex;\n    align-items: center;\n    padding: 0 30rpx;\n    margin-bottom: 30rpx;\n    \n    .form-icon {\n      font-size: 40rpx;\n      margin-right: 20rpx;\n    }\n    \n    .form-input {\n      flex: 1;\n      height: 100%;\n      font-size: 28rpx;\n    }\n    \n    .toggle-password {\n      font-size: 40rpx;\n      padding: 0 10rpx;\n    }\n    \n    .get-code-btn {\n      padding: 10rpx 20rpx;\n      background-color: $primary-color;\n      color: #fff;\n      font-size: 26rpx;\n      border-radius: 100rpx;\n    }\n  }\n}\n  \n  .login-btn {\n    width: 100%;\n  height: 100rpx;\n  border-radius: 100rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 32rpx;\n  font-weight: bold;\n  margin-top: 60rpx;\n  color: #fff;\n  \n  &.admin-login-btn {\n    background-color: $primary-color;\n  }\n  \n  &.supplier-login-btn {\n    background-color: #07c160; // 微信绿色\n  }\n}\n\n.bottom-links {\n  position: absolute;\n  bottom: 60rpx;\n  display: flex;\n  align-items: center;\n  \n  .link {\n    font-size: 28rpx;\n    color: $primary-color;\n  }\n  \n  .separator {\n    margin: 0 20rpx;\n    color: $text-secondary;\n  }\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/login/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapActions","uni"],"mappings":";;;AAkFA,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,OAAO;AACL,WAAO;AAAA,MACL,WAAW;AAAA;AAAA,MACX,cAAc;AAAA,MACd,SAAS;AAAA,MACT,OAAO;AAAA,QACL,UAAU;AAAA,QACV,UAAU;AAAA,MACZ;AAAA,IACF;AAAA,EACD;AAAA,EACD,SAAS;AAEP,SAAK,iBAAiB;AAAA,EACvB;AAAA,EACD,SAAS;AAAA,IACP,GAAGA,yBAAW,QAAQ,CAAC,OAAO,CAAC;AAAA,IAE/B,MAAM,mBAAmB;AACvB,YAAM,QAAQC,cAAAA,MAAI,eAAe,OAAO;AACxC,UAAI,OAAO;AAETA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,SACN;AAAA,MACH;AAAA,IACD;AAAA,IAED,aAAa,MAAM;AACjB,WAAK,YAAY;AAAA,IAClB;AAAA,IAED,iBAAiB;AACf,WAAK,eAAe,CAAC,KAAK;AAAA,IAC3B;AAAA,IAED,MAAM,mBAAmB;AACvB,UAAI,KAAK;AAAS;AAGlB,UAAI,CAAC,KAAK,MAAM,YAAY,CAAC,KAAK,MAAM,SAAS,QAAQ;AACvD,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACnB,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAEA,UAAI,CAAC,KAAK,MAAM,UAAU;AACxB,eAAOA,cAAAA,MAAI,UAAU;AAAA,UACnB,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH;AAEA,WAAK,UAAU;AACf,UAAI;AAEF,cAAM,KAAK,MAAM;AAAA,UACf,MAAM;AAAA,UACN,UAAU,KAAK,MAAM;AAAA,UACrB,UAAU,KAAK,MAAM;AAAA,SACtB;AAGDA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,SACN;AAAA,MACD,SAAO,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,SACP;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IAED,MAAM,sBAAsB;AAC1B,UAAI,KAAK;AAAS;AAElB,WAAK,UAAU;AACf,UAAI;AAEF,cAAM,EAAE,KAAK,IAAI,MAAMA,cAAAA,MAAI,MAAM;AAGjC,cAAM,KAAK,MAAM;AAAA,UACf,MAAM;AAAA,UACN;AAAA,SACD;AAGDA,sBAAAA,MAAI,SAAS;AAAA,UACX,KAAK;AAAA,SACN;AAAA,MACD,SAAO,OAAO;AACdA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,SACP;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IAED,uBAAuB;AAErBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IAED,iBAAiB;AAEfA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1MA,GAAG,WAAW,eAAe;"}