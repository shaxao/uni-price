{"version":3,"file":"create.js","sources":["pages/quote/create.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcXVvdGUvY3JlYXRlLnZ1ZQ"],"sourcesContent":["<template>\n  <view class=\"edit-container\">\n    <loading-animation :loading=\"isLoading\" text=\"加载中...\" />\n    <view class=\"content-wrapper\" v-if=\"!isLoading\">\n    <base-card class=\"form-card\">\n      <template #header>\n          <view class=\"page-header\">\n            <text class=\"page-title\">提交报价</text>\n            <text class=\"page-subtitle\">请填写您的运输报价信息</text>\n          </view>\n      </template>\n      <view class=\"form-content\">\n        <base-input\n            v-model=\"quote.forwarderName\"\n          label=\"货代公司名称\"\n          placeholder=\"请输入货代公司名称\"\n          :error=\"errors.forwarderName\"\n        />\n        <base-input\n            v-model=\"quote.shippingRoute\"\n          label=\"出运线路\"\n          placeholder=\"请输入出运线路\"\n          :error=\"errors.shippingRoute\"\n        />\n        <base-input\n            v-model=\"quote.deliveryTime\"\n          label=\"时效\"\n          placeholder=\"请输入时效（如：3-5天）\"\n          :error=\"errors.deliveryTime\"\n        />\n        <view class=\"form-row\">\n          <base-input\n              v-model=\"quote.pricePerKg\"\n            label=\"报价(元/kg)\"\n            type=\"digit\"\n            placeholder=\"请输入每公斤报价\"\n            :error=\"errors.pricePerKg\"\n          />\n          <base-input\n              v-model=\"quote.customsFee\"\n            label=\"报关费用(元/票)\"\n            type=\"digit\"\n            placeholder=\"请输入报关费用\"\n            :error=\"errors.customsFee\"\n          />\n        </view>\n        <view class=\"form-row\">\n          <base-input\n              v-model=\"quote.totalGrossWeight\"\n            label=\"总毛重(kg)\"\n            type=\"digit\"\n              placeholder=\"由产品详情自动带入\"\n            :error=\"errors.totalGrossWeight\"\n            disabled\n          />\n          <base-input\n              v-model=\"quote.totalFreight\"\n            label=\"总运费(元)\"\n            type=\"digit\"\n            placeholder=\"自动计算\"\n            disabled\n          />\n          <base-input\n              v-model=\"quote.totalCost\"\n            label=\"总费用(元)\"\n            type=\"digit\"\n            placeholder=\"自动计算\"\n            disabled\n          />\n        </view>\n        <base-input\n            v-model=\"quote.remark\"\n          label=\"备注\"\n          type=\"textarea\"\n          placeholder=\"请输入备注信息（选填）\"\n          :error=\"errors.remark\"\n        />\n      </view>\n      </base-card>\n\n      <!-- 费用摘要卡片 -->\n      <view class=\"summary-card\">\n        <view class=\"summary-title\">费用摘要</view>\n        <view class=\"summary-item\">\n          <text class=\"item-label\">运费单价</text>\n          <text class=\"item-value\">￥{{ quote.pricePerKg || 0 }}/kg</text>\n        </view>\n        <view class=\"summary-item\">\n          <text class=\"item-label\">报关费用</text>\n          <text class=\"item-value\">￥{{ quote.customsFee || 0 }}</text>\n        </view>\n        <view class=\"summary-divider\"></view>\n        <view class=\"summary-item total\">\n          <text class=\"item-label\">总费用</text>\n          <text class=\"item-value\">￥{{ quote.totalCost || 0 }}</text>\n        </view>\n      </view>\n\n      <!-- 底部操作按钮组 -->\n      <view class=\"action-buttons\">\n        <button class=\"action-btn secondary\" @click=\"handleCancel\">\n          <text class=\"btn-icon\">✖️</text>\n          <text>取消</text>\n        </button>\n        <button class=\"action-btn primary\" @click=\"handleSubmit\" :loading=\"submitLoading\">\n          <text class=\"btn-icon\" v-if=\"!submitLoading\">✓</text>\n          <text>{{ submitLoading ? '提交中...' : '提交报价' }}</text>\n        </button>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nimport BaseCard from '../../components/BaseCard.vue'\nimport BaseInput from '../../components/BaseInput.vue'\nimport LoadingAnimation from '../../components/LoadingAnimation.vue'\nimport { post } from '../../utils/request'\n\nexport default {\n  name: 'QuoteCreate',\n  components: {\n    BaseCard,\n    BaseInput,\n    LoadingAnimation\n  },\n  data() {\n    return {\n      isLoading: false,\n      submitLoading: false,\n      productId: '',\n      quote: {\n        forwarderName: '',\n        shippingRoute: '',\n        deliveryTime: '',\n        pricePerKg: '',\n        customsFee: '',\n        totalGrossWeight: '',\n        totalFreight: '',\n        totalCost: '',\n        remark: ''\n      },\n      errors: {}\n    }\n  },\n  watch: {\n    'quote.pricePerKg': {\n      handler: 'calculateTotalFreight',\n      immediate: true\n    },\n    'quote.totalGrossWeight': {\n      handler: 'calculateTotalFreight',\n      immediate: true\n    },\n    'quote.customsFee': {\n      handler: 'calculateTotalCost',\n      immediate: true\n    },\n    'quote.totalFreight': {\n      handler: 'calculateTotalCost',\n      immediate: true\n    }\n  },\n  onLoad(options) {\n    console.log('接收到的参数：', options)\n    this.productId = options.productId\n    if (options.totalGrossWeight) {\n      this.quote.totalGrossWeight = options.totalGrossWeight\n      this.calculateTotalFreight()\n    } else {\n      uni.showToast({\n        title: '请从产品详情页进入',\n        icon: 'none'\n      })\n      setTimeout(() => {\n        uni.navigateBack()\n      }, 1500)\n    }\n  },\n  methods: {\n    calculateTotalFreight() {\n      if (this.quote.pricePerKg && this.quote.totalGrossWeight) {\n        const totalFreight = Number(this.quote.pricePerKg) * Number(this.quote.totalGrossWeight)\n        this.quote.totalFreight = totalFreight.toFixed(2)\n        this.calculateTotalCost()\n      }\n    },\n    calculateTotalCost() {\n      if (this.quote.customsFee && this.quote.totalFreight) {\n        const totalCost = Number(this.quote.customsFee) + Number(this.quote.totalFreight)\n        this.quote.totalCost = totalCost.toFixed(2)\n      }\n    },\n    validateForm() {\n      const errors = {}\n      if (!this.quote.forwarderName) {\n        errors.forwarderName = '请输入货代公司名称'\n      }\n      if (!this.quote.shippingRoute) {\n        errors.shippingRoute = '请输入出运线路'\n      }\n      if (!this.quote.deliveryTime) {\n        errors.deliveryTime = '请输入时效'\n      }\n      if (!this.quote.pricePerKg) {\n        errors.pricePerKg = '请输入每公斤报价'\n      } else if (isNaN(this.quote.pricePerKg) || Number(this.quote.pricePerKg) <= 0) {\n        errors.pricePerKg = '请输入有效的报价金额'\n      }\n      if (!this.quote.customsFee) {\n        errors.customsFee = '请输入报关费用'\n      } else if (isNaN(this.quote.customsFee) || Number(this.quote.customsFee) < 0) {\n        errors.customsFee = '请输入有效的报关费用'\n      }\n      this.errors = errors\n      return Object.keys(errors).length === 0\n    },\n    handleCancel() {\n      uni.navigateBack()\n    },\n    async handleSubmit() {\n      if (!this.validateForm()) {\n        return\n      }\n      this.submitLoading = true\n      try {\n        const submitData = {\n          productId: this.productId,\n          forwarderName: this.quote.forwarderName,\n          shippingRoute: this.quote.shippingRoute,\n          deliveryTime: this.quote.deliveryTime,\n          pricePerKg: Number(this.quote.pricePerKg),\n          customsFee: Number(this.quote.customsFee),\n          totalGrossWeight: Number(this.quote.totalGrossWeight),\n          totalFreight: Number(this.quote.totalFreight),\n          totalCost: Number(this.quote.totalCost),\n          remark: this.quote.remark\n        }\n        await post('/quotes', submitData)\n        uni.showToast({\n          title: '提交成功',\n          icon: 'success'\n        })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1500)\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '提交失败',\n          icon: 'none'\n        })\n      } finally {\n        this.submitLoading = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/theme.scss';\n\n.edit-container {\n  min-height: 100vh;\n  background-color: $bg-secondary;\n  padding: $spacing-lg;\n}\n\n.content-wrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 32rpx;\n}\n\n.page-header {\n  background: #fff;\n  border-radius: 16rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.04);\n  margin-bottom: 32rpx;\n  padding: 36rpx 24rpx;\n  .page-title {\n    font-size: 38rpx;\n    font-weight: bold;\n    color: #222;\n    margin-bottom: 10rpx;\n  }\n  .page-subtitle {\n    font-size: 28rpx;\n    color: #888;\n  }\n}\n\n.form-card {\n  margin-bottom: 32rpx;\n  border-radius: 16rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.04);\n}\n\n.form-content {\n  .form-row {\n    display: flex;\n    gap: 32rpx;\n    margin-bottom: 32rpx;\n    .base-input-wrapper {\n      flex: 1;\n      margin-bottom: 0;\n    }\n  }\n}\n\n/* 费用摘要卡片 */\n.summary-card {\n  background-color: #fff;\n  padding: 36rpx 24rpx;\n  border-radius: 16rpx;\n  margin-bottom: 32rpx;\n  box-shadow: 0 2rpx 10rpx rgba(0,0,0,0.04);\n  .summary-title {\n    font-size: 32rpx;\n    font-weight: bold;\n    color: $text-primary;\n    margin-bottom: 24rpx;\n  }\n  .summary-item {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 18rpx;\n    .item-label {\n      font-size: 28rpx;\n      color: $text-secondary;\n    }\n    .item-value {\n      font-size: 28rpx;\n      color: $text-primary;\n    }\n    &.total {\n      .item-label {\n        font-size: 32rpx;\n        font-weight: 500;\n      }\n      .item-value {\n        font-size: 38rpx;\n        font-weight: bold;\n        color: #ff5252;\n      }\n    }\n  }\n  .summary-divider {\n    height: 1rpx;\n    background-color: #eee;\n    margin: 22rpx 0;\n  }\n}\n\n/* 底部按钮组 */\n.action-buttons {\n  display: flex;\n  gap: 32rpx;\n  margin-top: 28rpx;\n  padding: 36rpx 24rpx;\n  background-color: white;\n  border-radius: 18rpx;\n  box-shadow: 0 4rpx 12rpx rgba(0,0,0,0.05);\n  .action-btn {\n    flex: 1;\n    height: 100rpx;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 50rpx;\n    font-size: 30rpx;\n    font-weight: 500;\n    .btn-icon {\n      margin-right: 14rpx;\n      font-size: 34rpx;\n    }\n    &.secondary {\n      background-color: rgba(#f44336, 0.08);\n      color: #f44336;\n      border: 2rpx solid rgba(#f44336, 0.2);\n    }\n    &.primary {\n      background-color: #1976D2;\n      color: white;\n      border: none;\n      box-shadow: 0 4rpx 16rpx rgba(#1976D2, 0.13);\n      &:disabled {\n        opacity: 0.7;\n        background-color: #999;\n        box-shadow: none;\n      }\n    }\n  }\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/quote/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","post"],"mappings":"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"}