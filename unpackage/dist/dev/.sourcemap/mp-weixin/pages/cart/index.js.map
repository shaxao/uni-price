{"version":3,"file":"index.js","sources":["pages/cart/index.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2FydC9pbmRleC52dWU"],"sourcesContent":["<template>\n  <view class=\"cart-container\">\n    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\n    <view class=\"header\">\n      <text class=\"title\">ÊàëÁöÑË¥≠Áâ©ËΩ¶</text>\n      <text class=\"item-count\" v-if=\"cartItems.length > 0\">{{ cartItems.length }}‰ª∂ÂïÜÂìÅ</text>\n    </view>\n    \n    <!-- Á©∫Ë¥≠Áâ©ËΩ¶Áä∂ÊÄÅ -->\n    <view class=\"empty-state\" v-if=\"cartItems.length === 0\">\n      <image src=\"/static/images/empty.png\" class=\"empty-icon\" />\n      <text class=\"empty-text\">Ë¥≠Áâ©ËΩ¶ËøòÊòØÁ©∫ÁöÑ</text>\n      <text class=\"empty-desc\">Âø´ÂéªÊ∑ªÂä†ÂñúÊ¨¢ÁöÑÂïÜÂìÅÂêß</text>\n      <button class=\"go-shopping-btn\" @click=\"navigateToHome\">ÂéªÈÄâË¥≠</button>\n    </view>\n    \n    <!-- Ë¥≠Áâ©ËΩ¶ÂïÜÂìÅÂàóË°® -->\n    <scroll-view class=\"cart-list\" scroll-y v-else>\n      <view \n        class=\"cart-item\"\n        v-for=\"(item, index) in cartItems\" \n        :key=\"index\"\n        :class=\"{ 'slide-in': true }\"\n        :style=\"{ animationDelay: index * 0.05 + 's' }\"\n      >\n        <view class=\"item-content\">\n          <!-- ÂïÜÂìÅÂõæÁâá -->\n          <image \n            class=\"item-image\" \n            src=\"/static/images/default-product.png\" \n            mode=\"aspectFill\" \n          />\n          \n          <!-- ÂïÜÂìÅ‰ø°ÊÅØ -->\n          <view class=\"item-info\">\n            <text class=\"item-name\">{{ item.productName }}</text>\n            <text class=\"item-time\">{{ formatTime(item.addTime) }}</text>\n          </view>\n          \n          <!-- ÂïÜÂìÅÊìç‰Ωú -->\n          <view class=\"item-actions\">\n            <view class=\"action-btn view-btn\" @click=\"viewProduct(item.productId)\">\n              <text class=\"btn-text\">Êü•Áúã</text>\n            </view>\n            <view class=\"action-btn delete-btn\" @click=\"showDeleteConfirm(index)\">\n              <text class=\"btn-text\">Âà†Èô§</text>\n            </view>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n    \n    <!-- Â∫ïÈÉ®Êìç‰ΩúÂå∫ -->\n    <view class=\"cart-footer safe-area-bottom\" v-if=\"cartItems.length > 0\">\n      <view class=\"footer-action\">\n        <button class=\"action-btn clear-btn\" @click=\"showClearConfirm\">\n          <text class=\"btn-icon\">üóëÔ∏è</text>\n          <text class=\"btn-text\">Ê∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶</text>\n        </button>\n      </view>\n    </view>\n    \n    <!-- Â∫ïÈÉ®ËèúÂçïÊ†è -->\n    <tab-bar :current-tab=\"2\" />\n  </view>\n</template>\n\n<script>\nimport { mapState, mapActions } from 'vuex'\nimport TabBar from '../../components/TabBar.vue'\nimport dayjs from 'dayjs'\n\nexport default {\n  name: 'CartPage',\n  components: {\n    TabBar\n  },\n  computed: {\n    ...mapState('cart', ['cartItems'])\n  },\n  onShow() {\n    // ÊØèÊ¨°ÊòæÁ§∫È°µÈù¢Êó∂ÈáçÊñ∞Ëé∑ÂèñË¥≠Áâ©ËΩ¶Êï∞ÊçÆ\n    this.loadCartItems()\n  },\n  methods: {\n    ...mapActions('cart', [\n      'loadCartItems',\n      'removeCartItem',\n      'clearCart'\n    ]),\n    formatTime(timestamp) {\n      return dayjs(timestamp).format('YYYYÂπ¥MMÊúàDDÊó• HH:mm')\n    },\n    navigateToHome() {\n      // ‰ΩøÁî®reLaunchÊõø‰ª£switchTabÔºåÂõ†‰∏∫indexÈ°µÈù¢ÂèØËÉΩ‰∏çÊòØtabBarÈ°µÈù¢\n      uni.reLaunch({\n        url: '/pages/index/index'\n      })\n    },\n    viewProduct(productId) {\n      uni.navigateTo({\n        url: `/pages/product/detail?id=${productId}`\n      })\n    },\n    showDeleteConfirm(index) {\n      uni.showModal({\n        title: 'Á°ÆËÆ§Âà†Èô§',\n        content: 'Á°ÆÂÆöË¶Å‰ªéË¥≠Áâ©ËΩ¶‰∏≠Âà†Èô§ËØ•ÂïÜÂìÅÂêóÔºü',\n        success: (res) => {\n          if (res.confirm) {\n            this.handleRemoveItem(index)\n          }\n        }\n      })\n    },\n    async handleRemoveItem(index) {\n      const result = await this.removeCartItem(index)\n      \n      uni.showToast({\n        title: result.message,\n        icon: result.success ? 'success' : 'none'\n      })\n    },\n    showClearConfirm() {\n      uni.showModal({\n        title: 'Á°ÆËÆ§Ê∏ÖÁ©∫',\n        content: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫Ë¥≠Áâ©ËΩ¶ÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§ç„ÄÇ',\n        success: (res) => {\n          if (res.confirm) {\n            this.handleClearCart()\n          }\n        }\n      })\n    },\n    async handleClearCart() {\n      const result = await this.clearCart()\n      \n      uni.showToast({\n        title: result.message,\n        icon: result.success ? 'success' : 'none'\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/theme.scss';\n\n.cart-container {\n  min-height: 100vh;\n  background-color: $bg-secondary;\n  padding-bottom: 170rpx; // ‰∏∫Â∫ïÈÉ®ÁïôÂá∫Á©∫Èó¥\n  position: relative;\n}\n\n.header {\n  background: linear-gradient(135deg, $primary-color, darken($primary-color, 10%));\n  padding: 40rpx 30rpx 30rpx;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-end;\n  box-shadow: 0 4rpx 20rpx rgba(0,0,0,0.1);\n  \n  .title {\n    font-size: 36rpx;\n    font-weight: bold;\n    color: #fff;\n  }\n  \n  .item-count {\n    font-size: 24rpx;\n    color: rgba(255,255,255,0.9);\n    padding: 6rpx 16rpx;\n    background-color: rgba(255,255,255,0.2);\n    border-radius: 20rpx;\n  }\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 160rpx 0;\n  \n  .empty-icon {\n    width: 240rpx;\n    height: 240rpx;\n    margin-bottom: 40rpx;\n    opacity: 0.7;\n  }\n  \n  .empty-text {\n    font-size: 36rpx;\n    color: $text-primary;\n    font-weight: 500;\n    margin-bottom: 16rpx;\n  }\n  \n  .empty-desc {\n    font-size: 28rpx;\n    color: $text-secondary;\n    margin-bottom: 40rpx;\n  }\n  \n  .go-shopping-btn {\n    width: 280rpx;\n    height: 80rpx;\n    line-height: 80rpx;\n    background: linear-gradient(135deg, $primary-color, darken($primary-color, 10%));\n    color: #fff;\n    font-size: 28rpx;\n    border-radius: 40rpx;\n    font-weight: 500;\n    box-shadow: 0 4rpx 12rpx rgba($primary-color, 0.3);\n    transition: all 0.2s ease;\n    \n    &:active {\n      transform: scale(0.98);\n      box-shadow: 0 2rpx 8rpx rgba($primary-color, 0.2);\n    }\n  }\n}\n\n.cart-list {\n  padding: 20rpx;\n}\n\n// Âä®ÁîªÊïàÊûú\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(20rpx);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.slide-in {\n  animation: slideIn 0.3s ease-out forwards;\n}\n\n.cart-item {\n  background-color: #fff;\n  border-radius: 20rpx;\n  margin-bottom: 24rpx;\n  overflow: hidden;\n  box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.04);\n  transition: all 0.2s ease;\n  \n  &:active {\n    transform: scale(0.99);\n  }\n  \n  .item-content {\n    padding: 24rpx;\n    display: flex;\n    align-items: center;\n  }\n  \n  .item-image {\n    width: 140rpx;\n    height: 140rpx;\n    border-radius: 16rpx;\n    object-fit: cover;\n    background-color: #f5f5f5;\n    flex-shrink: 0;\n  }\n  \n  .item-info {\n    flex: 1;\n    padding: 0 20rpx;\n    \n    .item-name {\n      font-size: 30rpx;\n      color: $text-primary;\n      font-weight: 500;\n      margin-bottom: 12rpx;\n      display: block;\n      // ÊñáÊú¨Ê∫¢Âá∫ÁúÅÁï•\n      overflow: hidden;\n      text-overflow: ellipsis;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n    }\n    \n    .item-time {\n      font-size: 24rpx;\n      color: $text-secondary;\n      // ÊñáÊú¨Ê∫¢Âá∫ÁúÅÁï•\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  }\n  \n  .item-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 16rpx;\n    flex-shrink: 0;\n    \n    .action-btn {\n      width: 110rpx;\n      height: 60rpx;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 30rpx;\n      font-size: 24rpx;\n      \n      &.view-btn {\n        background-color: #f0f0f0;\n        color: $text-primary;\n      }\n      \n      &.delete-btn {\n        background-color: rgba(#f44336, 0.1);\n        color: #f44336;\n      }\n    }\n  }\n}\n\n.cart-footer {\n  position: fixed;\n  bottom: 100rpx; // ÈÅøÂÖç‰∏éTabBarÈáçÂè†\n  left: 0;\n  right: 0;\n  background-color: #fff;\n  padding: 20rpx 30rpx;\n  box-shadow: 0 -2rpx 10rpx rgba(0,0,0,0.05);\n  z-index: 10;\n  \n  .footer-action {\n    display: flex;\n    justify-content: flex-end;\n    \n    .action-btn {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      border-radius: 40rpx;\n      height: 80rpx;\n      font-size: 28rpx;\n      \n      &.clear-btn {\n        background-color: rgba(#f44336, 0.06);\n        color: #f44336;\n        padding: 0 40rpx;\n        font-weight: 500;\n        \n        .btn-icon {\n          margin-right: 8rpx;\n          font-size: 32rpx;\n        }\n      }\n    }\n  }\n}\n\n.safe-area-bottom {\n  padding-bottom: calc(30rpx + env(safe-area-inset-bottom, 0));\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/cart/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["mapState","mapActions","dayjs","uni"],"mappings":";;;AAqEA,MAAO,SAAQ,MAAW;AAG1B,MAAK,YAAU;AAAA,EACb,MAAM;AAAA,EACN,YAAY;AAAA,IACV;AAAA,EACD;AAAA,EACD,UAAU;AAAA,IACR,GAAGA,uBAAS,QAAQ,CAAC,WAAW,CAAC;AAAA,EAClC;AAAA,EACD,SAAS;AAEP,SAAK,cAAc;AAAA,EACpB;AAAA,EACD,SAAS;AAAA,IACP,GAAGC,cAAAA,WAAW,QAAQ;AAAA,MACpB;AAAA,MACA;AAAA,MACA;AAAA,IACF,CAAC;AAAA,IACD,WAAW,WAAW;AACpB,aAAOC,oBAAM,SAAS,EAAE,OAAO,mBAAmB;AAAA,IACnD;AAAA,IACD,iBAAiB;AAEfC,oBAAAA,MAAI,SAAS;AAAA,QACX,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IACD,YAAY,WAAW;AACrBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,4BAA4B,SAAS;AAAA,OAC3C;AAAA,IACF;AAAA,IACD,kBAAkB,OAAO;AACvBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,iBAAK,iBAAiB,KAAK;AAAA,UAC7B;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA,IACD,MAAM,iBAAiB,OAAO;AAC5B,YAAM,SAAS,MAAM,KAAK,eAAe,KAAK;AAE9CA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,OAAO;AAAA,QACd,MAAM,OAAO,UAAU,YAAY;AAAA,OACpC;AAAA,IACF;AAAA,IACD,mBAAmB;AACjBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,iBAAK,gBAAgB;AAAA,UACvB;AAAA,QACF;AAAA,OACD;AAAA,IACF;AAAA,IACD,MAAM,kBAAkB;AACtB,YAAM,SAAS,MAAM,KAAK,UAAU;AAEpCA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO,OAAO;AAAA,QACd,MAAM,OAAO,UAAU,YAAY;AAAA,OACpC;AAAA,IACH;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9IA,GAAG,WAAW,eAAe;"}