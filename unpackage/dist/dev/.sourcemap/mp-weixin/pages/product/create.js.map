{"version":3,"file":"create.js","sources":["pages/product/create.vue","../../../GameDo/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHJvZHVjdC9jcmVhdGUudnVl"],"sourcesContent":["<template>\n  <view class=\"create-container\">\n    <base-card class=\"form-card\">\n      <template #header>\n        <text class=\"form-title\">发布产品</text>\n      </template>\n      \n      <view class=\"form-content\">\n        <base-input\n          v-model=\"form.name\"\n          label=\"产品名称\"\n          placeholder=\"请输入产品名称\"\n          :error=\"errors.name\"\n        />\n        \n        <base-input\n          v-model=\"form.description\"\n          label=\"产品描述\"\n          placeholder=\"请输入产品描述\"\n          :error=\"errors.description\"\n        />\n        \n        <view class=\"form-row\">\n          <base-input\n            v-model=\"form.length\"\n            label=\"长度(cm)\"\n            type=\"number\"\n            placeholder=\"请输入长度\"\n            :error=\"errors.length\"\n          />\n          \n          <base-input\n            v-model=\"form.width\"\n            label=\"宽度(cm)\"\n            type=\"number\"\n            placeholder=\"请输入宽度\"\n            :error=\"errors.width\"\n          />\n          \n          <base-input\n            v-model=\"form.height\"\n            label=\"高度(cm)\"\n            type=\"number\"\n            placeholder=\"请输入高度\"\n            :error=\"errors.height\"\n          />\n        </view>\n        \n        <view class=\"form-row\">\n          <base-input\n            v-model=\"form.grossWeight\"\n            label=\"毛重(kg)\"\n            type=\"number\"\n            placeholder=\"请输入毛重\"\n            :error=\"errors.grossWeight\"\n          />\n          \n          <base-input\n            v-model=\"form.packageWeight\"\n            label=\"箱体重(kg)\"\n            type=\"number\"\n            placeholder=\"请输入箱体重\"\n            :error=\"errors.packageWeight\"\n          />\n          \n          <base-input\n            v-model=\"form.chargeableWeight\"\n            label=\"计费重(kg)\"\n            type=\"number\"\n            placeholder=\"请输入计费重\"\n            :error=\"errors.chargeableWeight\"\n          />\n        </view>\n        \n        <view class=\"form-row\">\n          <base-input\n            v-model=\"form.totalQuantity\"\n            label=\"总件数\"\n            type=\"number\"\n            placeholder=\"请输入总件数\"\n            :error=\"errors.totalQuantity\"\n          />\n          \n          <base-input\n            v-model=\"form.totalVolume\"\n            label=\"总体积(m³)\"\n            type=\"number\"\n            placeholder=\"请输入总体积\"\n            :error=\"errors.totalVolume\"\n          />\n          \n          <base-input\n            v-model=\"form.totalGrossWeight\"\n            label=\"总毛重(kg)\"\n            type=\"number\"\n            placeholder=\"\"\n            :error=\"errors.totalGrossWeight\"\n          />\n        </view>\n        \n        <base-input\n          v-model=\"form.warehouse\"\n          label=\"仓库地址\"\n          placeholder=\"请输入仓库地址\"\n          :error=\"errors.warehouse\"\n        />\n        \n        <base-input\n          v-model=\"form.zipcode\"\n          label=\"邮编\"\n          placeholder=\"请输入邮编\"\n          :error=\"errors.zipcode\"\n        />\n        \n        <view class=\"form-date\">\n          <text class=\"form-label\">截止日期</text>\n          <picker\n            mode=\"date\"\n            :value=\"form.expiryDate\"\n            :start=\"minDate\"\n            :end=\"maxDate\"\n            @change=\"handleDateChange\"\n          >\n            <view class=\"picker-value\">\n              {{ form.expiryDate || '请选择截止日期' }}\n            </view>\n          </picker>\n          <text v-if=\"errors.expiryDate\" class=\"form-error\">{{ errors.expiryDate }}</text>\n        </view>\n      </view>\n      \n      <template #footer>\n        <view class=\"form-footer\">\n          <base-button\n            type=\"secondary\"\n            class=\"mr-md\"\n            @click=\"handleCancel\"\n          >\n            取消\n          </base-button>\n          <base-button\n            type=\"primary\"\n            :loading=\"loading\"\n            @click=\"handleSubmit\"\n          >\n            发布\n          </base-button>\n        </view>\n      </template>\n    </base-card>\n  </view>\n</template>\n\n<script>\nimport { mapActions } from 'vuex'\nimport dayjs from 'dayjs'\nimport BaseCard from '../../components/BaseCard.vue'\nimport BaseButton from '../../components/BaseButton.vue'\nimport BaseInput from '../../components/BaseInput.vue'\n\nexport default {\n  name: 'ProductCreate',\n  components: {\n    BaseCard,\n    BaseButton,\n    BaseInput\n  },\n  data() {\n    return {\n      loading: false,\n      form: {\n        name: '',\n        description: '',\n        length: '',\n        width: '',\n        height: '',\n        grossWeight: '',\n        packageWeight: '',\n        chargeableWeight: '',\n        totalQuantity: '',\n        totalVolume: '',\n        totalGrossWeight: '',\n        warehouse: '',\n        zipcode: '',\n        expiryDate: ''\n      },\n      errors: {}\n    }\n  },\n  computed: {\n    minDate() {\n      return dayjs().format('YYYY-MM-DD')\n    },\n    maxDate() {\n      return dayjs().add(1, 'year').format('YYYY-MM-DD')\n    }\n  },\n  methods: {\n    ...mapActions('product', ['createProduct']),\n    \n    handleDateChange(e) {\n      this.form.expiryDate = e.detail.value\n    },\n    \n    validateForm() {\n      const errors = {}\n      \n      if (!this.form.name) {\n        errors.name = '请输入产品名称'\n      }\n      \n      if (!this.form.description) {\n        errors.description = '请输入产品描述'\n      }\n      \n      if (!this.form.length) {\n        errors.length = '请输入长度'\n      }\n      \n      if (!this.form.width) {\n        errors.width = '请输入宽度'\n      }\n      \n      if (!this.form.height) {\n        errors.height = '请输入高度'\n      }\n      \n      if (!this.form.grossWeight) {\n        errors.grossWeight = '请输入毛重'\n      }\n      \n      if (!this.form.packageWeight) {\n        errors.packageWeight = '请输入箱体重'\n      }\n      \n      if (!this.form.chargeableWeight) {\n        errors.chargeableWeight = '请输入计费重'\n      }\n      \n      if (!this.form.totalQuantity) {\n        errors.totalQuantity = '请输入总件数'\n      }\n      \n      if (!this.form.totalVolume) {\n        errors.totalVolume = '请输入总体积'\n      }\n      \n      if (!this.form.totalGrossWeight) {\n        errors.totalGrossWeight = '请输入总毛重'\n      }\n      \n      if (!this.form.warehouse) {\n        errors.warehouse = '请输入仓库地址'\n      }\n      \n      if (!this.form.zipcode) {\n        errors.zipcode = '请输入邮编'\n      }\n      \n      if (!this.form.expiryDate) {\n        errors.expiryDate = '请选择截止日期'\n      }\n      \n      this.errors = errors\n      return Object.keys(errors).length === 0\n    },\n    \n    async handleSubmit() {\n      if (!this.validateForm()) {\n        return\n      }\n      \n      this.loading = true\n      try {\n        await this.createProduct(this.form)\n        uni.showToast({\n          title: '发布成功',\n          icon: 'success'\n        })\n        setTimeout(() => {\n          uni.navigateBack()\n        }, 1500)\n      } catch (error) {\n        uni.showToast({\n          title: error.message || '发布失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    handleCancel() {\n      uni.navigateBack()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../styles/theme.scss';\n\n.create-container {\n  min-height: 100vh;\n  background-color: $bg-secondary;\n  padding: $spacing-md;\n}\n\n.form-card {\n  .form-title {\n    font-size: $font-size-lg;\n    font-weight: bold;\n    color: $text-primary;\n  }\n}\n\n.form-content {\n  .form-row {\n    display: flex;\n    gap: $spacing-md;\n    margin-bottom: $spacing-md;\n    \n    .base-input {\n      flex: 1;\n    }\n  }\n}\n\n.form-date {\n  margin-bottom: $spacing-md;\n  \n  .form-label {\n    font-size: $font-size-sm;\n    color: $text-secondary;\n    margin-bottom: $spacing-xs;\n    display: block;\n  }\n  \n  .picker-value {\n    padding: $spacing-sm;\n    border: 1px solid $border-color;\n    border-radius: $border-radius-md;\n    font-size: $font-size-md;\n    color: $text-primary;\n    background-color: $bg-primary;\n  }\n  \n  .form-error {\n    font-size: $font-size-xs;\n    color: $error-color;\n    margin-top: $spacing-xs;\n  }\n}\n\n.form-footer {\n  display: flex;\n  justify-content: flex-end;\n}\n</style> ","import MiniProgramPage from 'D:/orderMySelf/product-price/product-price/pages/product/create.vue'\nwx.createPage(MiniProgramPage)"],"names":["dayjs","mapActions","uni"],"mappings":"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"}